# Test Case Generator MCP Server

> MCP server that analyzes application screenshots and generates comprehensive manual test cases

---

## Features

- **Screenshot Analysis**: Analyze UI screenshots using Claude's vision capabilities
- **Test Case Generation**: Generate comprehensive test cases (Positive, Negative, Boundary, Security)
- **Auto-Save**: Automatically save test cases to `manual-tests/` directory
- **Resource Access**: Access generated test case files as MCP resources

---

## Installation

```bash
cd mcp-agents/testcase-generator-mcp
npm install
npm run build
```

---

## Configuration

### 1. Set Environment Variables

Create `.env` file or set environment variables:

```bash
ANTHROPIC_API_KEY=your-api-key-here
WORKSPACE_DIR=d:/Work/Claude-QE/Agents
```

### 2. Add to Claude Desktop Config

Edit your Claude Desktop config file:

**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
**Mac**: `~/Library/Application Support/Claude/claude_desktop_config.json`

Add this MCP server:

```json
{
  "mcpServers": {
    "testcase-generator": {
      "command": "node",
      "args": ["d:\\Work\\Claude-QE\\Agents\\mcp-agents\\testcase-generator-mcp\\dist\\index.js"],
      "env": {
        "ANTHROPIC_API_KEY": "your-api-key-here",
        "WORKSPACE_DIR": "d:\\Work\\Claude-QE\\Agents"
      }
    }
  }
}
```

### 3. Restart Claude Desktop

---

## Usage

Once configured, you can use these tools in Claude Desktop:

### Tool 1: `analyze_screenshot`

Analyze a screenshot and generate test cases:

```
Please analyze this screenshot using the analyze_screenshot tool.

Parameters:
- screenshot_path: "d:/Work/screenshots/login.png"
- app_name: "MyApp"
- base_url: "https://myapp.com"
- app_type: "SaaS"
```

**Optional Parameters:**
- `focus_areas`: `["authentication", "validation"]`
- `test_types`: `["Positive", "Negative", "Security"]`
- `auto_save`: `true` (default)

### Tool 2: `save_test_cases`

Save test cases manually:

```
Please save these test cases using the save_test_cases tool.

Parameters:
- app_name: "MyApp"
- content: "[test cases content]"
```

### Tool 3: `list_test_cases`

List all generated test case files:

```
Please list all test case files using the list_test_cases tool.
```

---

## Simple Usage Examples

### Basic Screenshot Analysis

```
I have a screenshot at: d:/screenshots/login.png

Please analyze it for MyApp (https://myapp.com) and generate test cases.
```

Claude will automatically use the `analyze_screenshot` tool!

### With Focus Areas

```
Analyze d:/screenshots/checkout.png for ShopEasy (https://shopeasy.com).

Focus on: payment processing, form validation, security
```

### List Existing Test Cases

```
Show me all test case files that have been generated.
```

---

## Output

Test cases are saved to:
```
d:\Work\Claude-QE\Agents\manual-tests\{AppName}_Manual_Test_Cases.txt
```

Format:
```
================================================================================
                    {APP_NAME} - MANUAL TEST CASES
================================================================================
Application URL: {BASE_URL}
Document Version: 1.0
Created Date: {DATE}
Generated By: Test Case Generator MCP Agent v1.0

================================================================================
                              TEST SUMMARY
================================================================================

Total Test Cases: {COUNT}

Module Breakdown:
- Authentication: 20 test cases
  - Positive: 6
  - Negative: 6
  - Boundary: 4
  - Security: 4

================================================================================
                        MODULE: AUTHENTICATION
================================================================================

------------------------------------------------------------------------------
TC_AUTH_001: Login with valid credentials
------------------------------------------------------------------------------
Test Type: Positive
Priority: High
Precondition: User has valid account

Test Data:
- email: user@example.com
- password: ValidPass123!

Steps:
1. Navigate to login page
2. Enter valid email
3. Enter valid password
4. Click login button

Expected Result:
- User is redirected to dashboard
- User sees welcome message
------------------------------------------------------------------------------
```

---

## MCP Resources

Generated test case files are exposed as MCP resources:

- **URI**: `testcase:///{filename}`
- **Type**: `text/plain`

You can read them using standard MCP resource commands.

---

## Development

### Build
```bash
npm run build
```

### Watch Mode
```bash
npm run watch
```

### Run
```bash
npm start
```

---

## Tools Reference

### `analyze_screenshot`

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `screenshot_path` | string | Yes | Path to screenshot file (PNG/JPG) |
| `app_name` | string | Yes | Application name |
| `base_url` | string | Yes | Application base URL |
| `app_type` | string | No | Application type (E-commerce, SaaS, etc.) |
| `focus_areas` | string[] | No | Specific areas to focus on |
| `test_types` | string[] | No | Test types to generate |
| `auto_save` | boolean | No | Auto-save to file (default: true) |

**Returns**: Summary + generated test cases

### `save_test_cases`

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `app_name` | string | Yes | Application name (for filename) |
| `content` | string | Yes | Test cases content to save |

**Returns**: File path where saved

### `list_test_cases`

No parameters required.

**Returns**: List of all test case files

---

## Integration with Automation Generator

After generating test cases, use them with the Automation Generator Agent:

```
Now generate Playwright automation from:
manual-tests/MyApp_Manual_Test_Cases.txt
```

---

## Troubleshooting

### "ANTHROPIC_API_KEY not configured"
- Set the API key in your Claude Desktop config or `.env` file

### "Failed to read screenshot"
- Check the file path is absolute and correct
- Ensure file exists and is readable
- Supported formats: PNG, JPG/JPEG

### "MCP server not showing in /tools"
- Restart Claude Desktop
- Check the config file syntax is valid JSON
- Verify the path to dist/index.js is correct

---

## Version

**Version**: 1.0.0
**Requires**: Claude Desktop with MCP support
**Node Version**: 18+
